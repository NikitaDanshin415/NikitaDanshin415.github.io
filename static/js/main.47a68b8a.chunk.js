(this.webpackJsonpmytms_frontend=this.webpackJsonpmytms_frontend||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(15),s=n.n(a),o=n(3),i=n.n(o),u=n(4),j=n(5),l=n(6),d=n(8),p=n(7),h=(n(21),n(22),n(12)),b=new h.UserManager({authority:"https://localhost:5001/",client_id:"client_id_js",response_type:"code",scope:"openid profile TmsWebApi",redirect_uri:"http://localhost:3000/oidcLogin",post_logout_redirect_uri:"http://localhost:3000/"}),f=n(0);function O(){b.signinRedirect()}var m=function(){return Object(f.jsxs)("div",{className:"Auth",children:[Object(f.jsx)("div",{className:"Auth_title",children:Object(f.jsx)("h1",{children:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f\u043c\u0438"})}),Object(f.jsx)("div",{className:"Auth_buttons",children:Object(f.jsx)("button",{className:"transition",onClick:O,children:"\u0412\u043e\u0439\u0442\u0438"})})]})},x=(n(24),n(25),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={term:""},e.onSerchChange=function(t){var n=t.target.value;e.setState({term:n}),e.props.onSerchChange(n)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"searchPanel",children:Object(f.jsx)("input",{placeholder:"Serch panel",value:this.state.term,onChange:this.onSerchChange})})}}]),n}(r.a.Component)),v=x,g=(n(26),n(11)),w=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.project,t=new Date(e.project.additionDate);return Object(f.jsxs)("div",{className:"projectItem",children:[Object(f.jsx)(g.b,{to:"/project/".concat(e.project.id),children:Object(f.jsx)("h2",{children:e.project.projectName})}),Object(f.jsxs)("div",{className:"projectItem_info",children:[Object(f.jsx)("div",{children:Object(f.jsx)("span",{children:e.projectRole.roleName})}),Object(f.jsx)("div",{children:Object(f.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",t.getDate(),".",t.getMonth()+1,".",t.getFullYear()]})})]})]})}}]),n}(r.a.Component),P=(n(27),function(e){var t=e.projects.map((function(e){return Object(f.jsx)("li",{className:"list-group-item",children:Object(f.jsx)(w,{project:e})},e.id)}));return Object(f.jsx)("ul",{children:t})}),y=(n(28),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.showModal;return Object(f.jsx)("div",{className:"plus_container",children:Object(f.jsx)("div",{className:"plusBtn",onClick:e})})}}]),n}(r.a.Component)),N=(n(29),function e(){var t=this;Object(j.a)(this,e),this._apiBase="https://localhost:44354/api/1",this.getToken=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getUser().then((function(e){t=e.access_token}));case 2:return e.next=4,t;case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.baseGetRequest=function(){var e=Object(u.a)(i.a.mark((function e(n,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getToken().then(function(){var e=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/").concat(n,"/").concat(c),{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{Accept:"*/*","Content-Type":"application/json","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",Authorization:"Bearer "+r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).catch((function(e){return console.log(e),e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.basePostRequest=function(){var e=Object(u.a)(i.a.mark((function e(n,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getToken().then(function(){var e=Object(u.a)(i.a.mark((function e(r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase,"/").concat(n),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{Accept:"*/*","Content-Type":"application/json","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",Authorization:"Bearer "+r},body:JSON.stringify(c)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.createProject=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.basePostRequest("Project",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getProject=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.baseGetRequest("ProjectParticipant",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getProjects=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.baseGetRequest("ProjectParticipant","");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.createTestPlan=function(){var e=Object(u.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={TestPlanName:"test from ui",Description:"string",ProjectId:n},e.next=3,t.basePostRequest("TestPlan",c);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getTestPlans=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.baseGetRequest("TestPlan",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={projectName:""},e.api=new N,e.addProject=function(){var t=Object(u.a)(i.a.mark((function t(n){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c={projectName:e.state.projectName},t.next=4,e.api.createProject(c);case 4:e.props.hideModal();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editField=function(t){e.setState({projectName:t.target.value})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.hideModal;return Object(f.jsx)("div",{className:"modal_shade",children:Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsxs)("div",{className:"modal_header",children:[Object(f.jsx)("h2",{children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"}),Object(f.jsx)("div",{className:"hide_button",onClick:e,children:"X"})]}),Object(f.jsx)("div",{className:"modal_content",children:Object(f.jsxs)("form",{className:"modal_addForm",children:[Object(f.jsx)("input",{type:"text",onChange:this.editField}),Object(f.jsx)("button",{onClick:this.addProject,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})})]})})}}]),n}(r.a.Component),S=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isLoaded:!1,projects:[],term:"",showAddModel:!1},e.api=new N,e.getProjects=Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.api.getProjects());case 1:case"end":return t.stop()}}),t)}))),e.onSearchChange=function(t){e.setState({term:t})},e.showAddProjectForm=function(){e.setState({showAddModel:!0})},e.hideAddProjectForm=function(){e.setState({showAddModel:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.api.getProjects().then((function(t){e.setState({projects:t.projectParticipant})}))}},{key:"componentDidUpdate",value:function(e,t,n){var c=this;t.showAddModel!==this.state.showAddModel&&this.getProjects().then((function(e){console.log(e),c.setState({projects:e.projectParticipant})}))}},{key:"search",value:function(e,t){return""===t?e:e.filter((function(e){return e.project.projectName.toLowerCase().indexOf(t.toLowerCase())>-1}))}},{key:"render",value:function(){var e=this.state,t=e.projects,n=e.term,c=this.search(t,n),r=null;return this.state.showAddModel&&(r=Object(f.jsx)(k,{hideModal:this.hideAddProjectForm})),Object(f.jsxs)("div",{className:"Home",children:[Object(f.jsx)(v,{onSerchChange:this.onSearchChange}),Object(f.jsx)(P,{projects:c}),Object(f.jsx)(y,{showModal:this.showAddProjectForm}),r]})}}]),n}(r.a.Component),A=S,C=n(2),_=function(){return new h.UserManager({loadUserInfo:!0,response_mode:"query"}).signinRedirectCallback().then((function(e){console.log(e),window.location.href="http://localhost:3000/"})).catch((function(e){console.log(e)})),""},T=(n(30),function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.getUser().then(function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({user:n.profile.name});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"render",value:function(){return Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"header_title",children:Object(f.jsx)(g.b,{to:"/",children:Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f\u043c\u0438"})})})}),Object(f.jsxs)("div",{className:"header_buttons",children:[Object(f.jsx)("span",{children:this.state.user}),Object(f.jsx)("button",{className:"transition",onClick:function(){b.signoutRedirect()},children:"\u0412\u044b\u0439\u0442\u0438"})]})]})}}]),n}(r.a.Component)),M=n(10),R=(n(31),function(){return Object(f.jsx)("div",{className:"NotFound",children:Object(f.jsx)("img",{src:"https://i.imgur.com/cpoBxhU.png"})})}),D=(n(32),function(e){var t=e.projectInfo,n=e.role,c=new Date(t.additionDate);return Object(f.jsxs)("div",{className:"projectHeader",children:[Object(f.jsx)("h2",{children:t.projectName}),Object(f.jsxs)("div",{className:"projectItem_info",children:[Object(f.jsx)("div",{children:Object(f.jsx)("span",{children:n.roleName})}),Object(f.jsx)("div",{children:Object(f.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430: ",c.getDate(),".",c.getMonth()+1,".",c.getFullYear()]})})]})]})}),I=(n(33),function(e){var t="projectTestPlanElement";return e.selected&&(t+=" selected"),Object(f.jsxs)("div",{className:t,onClick:function(){e.select(e.element.id)},children:[Object(f.jsx)("h3",{children:e.element.testPlanName}),Object(f.jsx)("span",{children:e.element.description})]})}),F=function(e){var t=new N,n=function(){var n=Object(u.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.TestPlanAddWindow(!0),n.next=3,t.createTestPlan(e.projectId);case 3:e.TestPlanAddWindow(!1);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if(void 0===e.testPlans)return null;var c=e.testPlans.map((function(t){var n=!1;return t.id===e.selectedPlan&&(n=!0),Object(f.jsx)("li",{children:Object(f.jsx)(I,{element:t,select:e.selectPlan,selected:n})},t.id)}));return Object(f.jsxs)("div",{className:"projectTestPlan",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h2",{children:"\u041f\u043b\u0430\u043d\u044b \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})}),Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"text"})}),Object(f.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e= ",c.length,Object(f.jsx)("ul",{children:c})]}),Object(f.jsx)(y,{showModal:n})]})},L=F,q=function(e){return Object(f.jsxs)("div",{className:"projectTestCase",children:[Object(f.jsx)("h2",{children:"\u0421\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0442\u0435\u0442\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"}),Object(f.jsxs)("div",{children:["\u0412\u044b\u0431\u0440\u0430\u043d \u043f\u043b\u0430\u043d \u0441 id : ",e.selectedPlan]})]})},B=function(){var e=Object(c.useState)(Object(C.g)().id),t=Object(M.a)(e,1)[0],n=Object(c.useState)({additionToProject:null,id:null,project:{additionDate:null,id:null,projectName:null,projectStatus:null,projectStatusId:null},projectRole:{id:null,roleName:null}}),r=Object(M.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)([]),i=Object(M.a)(o,2),u=i[0],j=i[1],l=Object(c.useState)([!1]),d=Object(M.a)(l,2),p=d[0],h=d[1],b=Object(c.useState)(null),O=Object(M.a)(b,2),m=O[0],x=O[1],v=Object(c.useState)(!1),g=Object(M.a)(v,2),w=g[0],P=g[1],y=new N;return Object(c.useEffect)((function(){y.getProject(t).then((function(e){s({additionToProject:e.additionToProject,id:e.id,project:{additionDate:e.project.additionDate,id:e.project.id,projectName:e.project.projectName,projectStatus:e.project.projectStatus,projectStatusId:e.project.projectStatusId},projectRole:{id:e.projectRole.id,roleName:e.projectRole.roleName}})})).catch((function(e){P(!0),console.log(e)})),y.getTestPlans(t).then((function(e){j(e.testPlans)})).catch((function(e){P(!0),console.log(e)}))}),[]),Object(c.useEffect)((function(){y.getTestPlans(t).then((function(e){j(e.testPlans)})).catch((function(e){P(!0),console.log(e)}))}),[p]),w?Object(f.jsx)(R,{}):Object(f.jsxs)("div",{children:[Object(f.jsx)(D,{projectInfo:a.project,role:a.projectRole}),Object(f.jsxs)("div",{className:"project_content",children:[Object(f.jsx)(L,{projectId:t,testPlans:u,selectPlan:x,TestPlanAddWindow:h,selectedPlan:m}),Object(f.jsx)(q,{selectedPlan:m})]})]})},U=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(j.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isLogin:!1,user:null,token:null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getUser().then((function(e){e?t.setState({isLogin:!0,user:e.profile.name,token:e.access_token}):(console.log("user not logged in"),t.setState({isLogin:!1,user:null,token:null}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLogin?Object(f.jsx)(g.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(T,{user:this.state.user}),Object(f.jsxs)(C.c,{children:[Object(f.jsx)(C.a,{path:"/project/:id",element:Object(f.jsx)(B,{})}),Object(f.jsx)(C.a,{path:"/",element:Object(f.jsx)(A,{})}),Object(f.jsx)(C.a,{path:"*",element:Object(f.jsx)(R,{})})]})]})}):Object(f.jsx)("div",{className:"App auth",children:Object(f.jsx)(g.a,{children:Object(f.jsxs)(C.c,{children:[Object(f.jsx)(C.a,{path:"/",element:Object(f.jsx)(m,{})}),Object(f.jsx)(C.a,{path:"/oidcLogin",element:Object(f.jsx)(_,{})}),Object(f.jsx)(C.a,{path:"*",element:Object(f.jsx)(R,{})})]})})})}}]),n}(r.a.Component);s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(U,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.47a68b8a.chunk.js.map